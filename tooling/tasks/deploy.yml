version: '3'

tasks:
  localnet:
    desc: Deploy to local Sui network
    cmds:
      - echo "🚀 Deploying to localnet..."
      - export SUI_NETWORK=localnet
      - task: move:deploy
      - echo "✅ Deployed to localnet"

  devnet:
    desc: Deploy to Sui devnet
    cmds:
      - echo "🚀 Deploying to devnet..."
      - export SUI_NETWORK=devnet
      - task: move:deploy
      - echo "✅ Deployed to devnet"

  testnet:
    desc: Deploy to Sui testnet
    cmds:
      - echo "🚀 Deploying to testnet..."
      - export SUI_NETWORK=testnet
      - task: move:deploy
      - echo "✅ Deployed to testnet"

  mainnet:
    desc: Deploy to Sui mainnet (PRODUCTION)
    cmds:
      - |
        echo "⚠️  WARNING - Deploying to MAINNET"
        read -p "Are you sure? (yes/no) " -r
        if [[ $REPLY == "yes" ]]; then
          export SUI_NETWORK=mainnet
          task move:deploy
          echo "✅ Deployed to mainnet"
        else
          echo "❌ Deployment cancelled"
        fi

  verify:
    desc: Verify deployed contracts on network
    cmds:
      - echo "🔍 Verifying deployed contracts..."
      - sui client objects --json | jq '.[] | select(.type | contains("Package"))'
      - echo "✅ Verification complete"
